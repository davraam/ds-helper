<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="dsHelper">
<title>Descriptive functions • dsHelper</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Descriptive functions">
<meta property="og:description" content="dsHelper">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">dsHelper</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/ds-helper-main-vignette.html">Descriptive functions</a>
    <a class="dropdown-item" href="../articles/ds-helper-trajectories-vignette.html">Conducting mixed effect/trajectory analysis using DataSHIELD</a>
    <a class="dropdown-item" href="../articles/TROUBLESHOOTING.html">Troubleshooting</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/lifecycle-project/ds-helper/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Descriptive functions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/lifecycle-project/ds-helper/blob/HEAD/vignettes/ds-helper-main-vignette.Rmd" class="external-link"><code>vignettes/ds-helper-main-vignette.Rmd</code></a></small>
      <div class="d-none name"><code>ds-helper-main-vignette.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introducation">Introducation<a class="anchor" aria-label="anchor" href="#introducation"></a>
</h2>
<p>dsHelper contains a number of client-side functions designed to
simplify data manipulation and analysis using DataSHIELD. Functions are
grouped in the following families:</p>
<ul>
<li>Descriptive functions</li>
<li>Data manipulation functions</li>
<li>Utility functions</li>
<li>Functions for trajectory models</li>
</ul>
<p>This vignette demonstrates the first three families of function.
Functions to assist with trajectory/mixed effect analysis are described
in a separate tutorial.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("remotes")</span></span>
<span><span class="co">#library(remotes)</span></span>
<span><span class="co">#install_github("timcadman/ds-helper")</span></span>
<span><span class="co">#install_github("datashield/DSI")</span></span>
<span><span class="co">#install_github("datashield/dsBaseClient")</span></span>
<span><span class="co">#install.packages("DSMolgenisArmadillo")</span></span>
<span><span class="co">#install.packages("tidyverse")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/lifecycle-project/ds-helper/" class="external-link">dsHelper</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/datashield/DSI/" class="external-link">DSI</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">dsBaseClient</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/molgenis/molgenis-r-datashield/" class="external-link">DSMolgenisArmadillo</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="data-simulated-data-based-on-lifecycle-variables">Data: simulated data based on LifeCycle variables<a class="anchor" aria-label="anchor" href="#data-simulated-data-based-on-lifecycle-variables"></a>
</h2>
<p>To demonstrate these functions we will use remote simulated data for
three cohorts: ALSPAC, BCG &amp; BiB.</p>
<p>If you are unsure how to log in, please consult the DataSHIELD
vignette: [link]</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://armadillo-demo.molgenis.net"</span></span>
<span><span class="va">token</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://molgenis.github.io/molgenis-r-datashield/reference/armadillo.get_token.html" class="external-link">armadillo.get_token</a></span><span class="op">(</span><span class="va">url</span><span class="op">)</span></span>
<span></span>
<span><span class="va">builder</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/newDSLoginBuilder.html" class="external-link">newDSLoginBuilder</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span></span>
<span>server <span class="op">=</span> <span class="st">"alspac"</span>,</span>
<span>url <span class="op">=</span> <span class="va">url</span>,</span>
<span>table <span class="op">=</span> <span class="st">"trajectories/data/alspac"</span>,</span>
<span>token <span class="op">=</span> <span class="va">token</span>,</span>
<span>driver <span class="op">=</span> <span class="st">"ArmadilloDriver"</span>, </span>
<span>profile <span class="op">=</span> <span class="st">"xenon"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span></span>
<span>server <span class="op">=</span> <span class="st">"bcg"</span>,</span>
<span>url <span class="op">=</span> <span class="va">url</span>,</span>
<span>table <span class="op">=</span> <span class="st">"trajectories/data/bcg"</span>,</span>
<span>token <span class="op">=</span> <span class="va">token</span>,</span>
<span>driver <span class="op">=</span> <span class="st">"ArmadilloDriver"</span>, </span>
<span>profile <span class="op">=</span> <span class="st">"xenon"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">builder</span><span class="op">$</span><span class="fu">append</span><span class="op">(</span></span>
<span>server <span class="op">=</span> <span class="st">"bib"</span>,</span>
<span>url <span class="op">=</span> <span class="va">url</span>,</span>
<span>table <span class="op">=</span> <span class="st">"trajectories/data/bib"</span>,</span>
<span>token <span class="op">=</span> <span class="va">token</span>,</span>
<span>driver <span class="op">=</span> <span class="st">"ArmadilloDriver"</span>, </span>
<span>profile <span class="op">=</span> <span class="st">"xenon"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">logindata</span> <span class="op">&lt;-</span> <span class="va">builder</span><span class="op">$</span><span class="fu">build</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">conns</span> <span class="op">&lt;-</span> <span class="fu">DSI</span><span class="fu">::</span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.login.html" class="external-link">datashield.login</a></span><span class="op">(</span>logins <span class="op">=</span> <span class="va">logindata</span>, assign <span class="op">=</span> <span class="cn">TRUE</span>, symbol <span class="op">=</span> <span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## [1] "id"                 "age"                "sex"                "ethnicity"          "father_socialclass"</span></span>
<span><span class="co">## [6] "mother_education"   "weight"            </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## [1] "id"                 "age"                "sex"                "ethnicity"          "father_socialclass"</span></span>
<span><span class="co">## [6] "mother_education"   "weight"            </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## [1] "id"                 "age"                "sex"                "ethnicity"          "father_socialclass"</span></span>
<span><span class="co">## [6] "mother_education"   "weight"</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="data-manipulation-functions">Data manipulation functions<a class="anchor" aria-label="anchor" href="#data-manipulation-functions"></a>
</h2>
<div class="section level3">
<h3 id="rename-variables-with-dh-renamevars">Rename variables with dh.renameVars()<a class="anchor" aria-label="anchor" href="#rename-variables-with-dh-renamevars"></a>
</h3>
<p>dh.renameVars allows you to change the names of one or more variables
within a dataframe. For example, we can rename the variables “id”, and
“ethnicity” with simpler names:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.renameVars.html">dh.renameVars</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  current_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ethnicity"</span>, <span class="st">"father_socialclass"</span><span class="op">)</span>, </span>
<span>  new_names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"race"</span>, <span class="st">"paternal_class"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## [1] "id"               "age"              "sex"              "mother_education" "weight"           "race"            </span></span>
<span><span class="co">## [7] "paternal_class"  </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## [1] "id"               "age"              "sex"              "mother_education" "weight"           "race"            </span></span>
<span><span class="co">## [7] "paternal_class"  </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## [1] "id"               "age"              "sex"              "mother_education" "weight"           "race"            </span></span>
<span><span class="co">## [7] "paternal_class"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="removing-columns-with-dh-dropcols">Removing columns with dh.dropCols()<a class="anchor" aria-label="anchor" href="#removing-columns-with-dh-dropcols"></a>
</h3>
<p>dh.dropCols allows you to remove columns from a dataframe. The
argument “type” allows you to specify whether to remove or to keep the
provided variables. For example, we can remove the column “mat_ed”:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.dropCols.html">dh.dropCols</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>, </span>
<span>  vars <span class="op">=</span> <span class="st">"mother_education"</span>, </span>
<span>  type <span class="op">=</span> <span class="st">"remove"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## [1] "id"             "age"            "sex"            "weight"         "race"           "paternal_class"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## [1] "id"             "age"            "sex"            "weight"         "race"           "paternal_class"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## [1] "id"             "age"            "sex"            "weight"         "race"           "paternal_class"</span></span></code></pre>
<p>Alternatively, we can just to keep certain columns and remove
everything else. In this example we keep the columns “sex”, “height_m”
and “ivf”:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.dropCols.html">dh.dropCols</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>, </span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"id"</span>, <span class="st">"age"</span>, <span class="st">"sex"</span>, <span class="st">"weight"</span><span class="op">)</span>, </span>
<span>  type <span class="op">=</span> <span class="st">"keep"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## [1] "id"     "age"    "sex"    "weight"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## [1] "id"     "age"    "sex"    "weight"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## [1] "id"     "age"    "sex"    "weight"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="creating-strata-of-a-variable-with-dh-makestrata">Creating strata of a variable with dh.makeStrata()<a class="anchor" aria-label="anchor" href="#creating-strata-of-a-variable-with-dh-makestrata"></a>
</h3>
<p>A common scenario is when you have repeat measurements of a variable,
but want to create individual versions of that variable within different
age bands.</p>
<p>For example, you may have a dataset with repeat measurments of height
between ages 2-18. However, you want to create a new variable which is
height between ages 4-6. This is quite a long process in datashield, as
it involves creating a number of subsets. It is also necessary to deal
with situations where a subject has &gt;1 observation within the
specified period.</p>
<p>In the example below, we create two variables for child height
measured between (i) ages 4-6 and (ii) ages 7-10. Where children have
more than one observation in either window, we opt to take the earliest
measurement. This behaviour is controlled by the argument “mult_action”.
You can also choose to take (i) the latest variable, or (ii) the
variable closest to a particular time point. Finally, within each band
we choose to take values &gt;= to the lowest band, and &lt; the highest
band. This behaviour is controlled by the argument “band_action”. See
?dh.makeStrata for more information on the available arguments.</p>
<p>In this example it runs quite quickly, however if you are using many
cohorts with large datasets it can take a considerable amount of time
(30 - 60 min).</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.makeStrata.html">dh.makeStrata</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  var_to_subset <span class="op">=</span> <span class="st">"weight"</span>,</span>
<span>  age_var <span class="op">=</span> <span class="st">"age"</span>, </span>
<span>  bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>, <span class="fl">6</span>, <span class="fl">7</span>, <span class="fl">10</span><span class="op">)</span>, </span>
<span>  mult_action <span class="op">=</span> <span class="st">"earliest"</span>,</span>
<span>  band_action <span class="op">=</span> <span class="st">"ge_l"</span>, </span>
<span>  id_var <span class="op">=</span> <span class="st">"id"</span>, </span>
<span>  new_obj <span class="op">=</span> <span class="st">"height_data"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in `left_join()`:</span></span>
<span><span class="co">## ! Join columns in `x` must be present in the data.</span></span>
<span><span class="co">## ✖ Problem with `cohort` and `suffix`.</span></span></code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"height_data"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## [1] "id"      "tmp_obj"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## [1] "id"      "tmp_obj"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## [1] "id"      "tmp_obj"</span></span></code></pre>
<p>The created dataset contains 5 variables: the id variable, two
variables giving the height value within the specified bands (height_.6,
height_.10) and two variables giving the age of measurement for these
height variables (age.6, age.10).</p>
<p>We can then use ds.merge to join this dataframe back with our main
data:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.merge.html" class="external-link">ds.merge</a></span><span class="op">(</span></span>
<span>  x.name <span class="op">=</span> <span class="st">"data"</span>, </span>
<span>  y.name <span class="op">=</span> <span class="st">"height_data"</span>, </span>
<span>  by.x <span class="op">=</span> <span class="st">"id"</span>, </span>
<span>  by.y <span class="op">=</span> <span class="st">"id"</span>, </span>
<span>  all.x <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>  newobj <span class="op">=</span> <span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## [1] "id"      "age"     "sex"     "weight"  "tmp_obj"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## [1] "id"      "age"     "sex"     "weight"  "tmp_obj"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## [1] "id"      "age"     "sex"     "weight"  "tmp_obj"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="transforming-continuous-variable-to-interquartile-range-using-dh-makeiqr">Transforming continuous variable to interquartile range using
dh.makeIQR()<a class="anchor" aria-label="anchor" href="#transforming-continuous-variable-to-interquartile-range-using-dh-makeiqr"></a>
</h3>
<p>In some scenarios (e.g. when using an environmental exposures) we
want to standardise a continuous variable by transforming it by its
interquartile range. The formula is:</p>
<p>value(subject) / 75th percentile(sample) - 25th
percentile(sample)</p>
<p>When using data from multiple cohorts there are two options for the
denominator: (i) create IQR in each cohort using the interquartile range
in that cohort, (ii) create IQR in each cohort by using the combined
interquartile range across all cohorts. This is controlled by the
argument <code>type</code>.</p>
<p>In this example we transform child weight. The created variable will
have the suffix “iqr_c” if <code>type</code> is “separate” and “iqr_p”
if type = “pooled”.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.makeIQR.html">dh.makeIQR</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  vars <span class="op">=</span> <span class="st">"weight"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"split"</span>,</span>
<span>  new_obj <span class="op">=</span> <span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.colnames.html" class="external-link">ds.colnames</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## [1] "id"           "age"          "sex"          "weight"       "tmp_obj"      "weight_iqr_s"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## [1] "id"           "age"          "sex"          "weight"       "tmp_obj"      "weight_iqr_s"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## [1] "id"           "age"          "sex"          "weight"       "tmp_obj"      "weight_iqr_s"</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.summary.html" class="external-link">ds.summary</a></span><span class="op">(</span><span class="st">"data$weight_iqr_s"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## $alspac$class</span></span>
<span><span class="co">## [1] "numeric"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $alspac$length</span></span>
<span><span class="co">## [1] 129681</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $alspac$`quantiles &amp; mean`</span></span>
<span><span class="co">##        5%       10%       25%       50%       75%       90%       95%      Mean </span></span>
<span><span class="co">## 0.4091894 0.4749404 0.8753985 1.9270502 4.0167522 5.8588743 6.8073844 2.6408378 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## $bcg$class</span></span>
<span><span class="co">## [1] "numeric"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg$length</span></span>
<span><span class="co">## [1] 12724</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg$`quantiles &amp; mean`</span></span>
<span><span class="co">##        5%       10%       25%       50%       75%       90%       95%      Mean </span></span>
<span><span class="co">## 0.4297604 0.4883779 0.6827643 1.2218283 1.6454341 1.9312762 2.0859876 1.2049523 </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## $bib$class</span></span>
<span><span class="co">## [1] "numeric"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib$length</span></span>
<span><span class="co">## [1] 68864</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib$`quantiles &amp; mean`</span></span>
<span><span class="co">##        5%       10%       25%       50%       75%       90%       95%      Mean </span></span>
<span><span class="co">## 0.3423285 0.3857788 0.4784658 0.7840827 1.4784658 1.9096193 2.1163471 0.9941187</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="removing-objects-from-workspace-using-dh-tidyenv">Removing objects from workspace using dh.tidyEnv()<a class="anchor" aria-label="anchor" href="#removing-objects-from-workspace-using-dh-tidyenv"></a>
</h3>
<p>The DataSHIELD function <code><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.rm.html" class="external-link">ds.rm()</a></code> allows you to remove
single objects from your workspace. However, we may want to remove a
number of objects at once. Use the argument <code>type</code> to choose
whether to keep or remove the variables listed in <code>vars</code>.
Here we chose to keep “data” and remove everything else.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.tidyEnv.html">dh.tidyEnv</a></span><span class="op">(</span></span>
<span>  obj <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"keep"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.ls.html" class="external-link">ds.ls</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## $alspac$environment.searched</span></span>
<span><span class="co">## [1] "R_GlobalEnv"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $alspac$objects.found</span></span>
<span><span class="co">## [1] "data"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## $bcg$environment.searched</span></span>
<span><span class="co">## [1] "R_GlobalEnv"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg$objects.found</span></span>
<span><span class="co">## [1] "data"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## $bib$environment.searched</span></span>
<span><span class="co">## [1] "R_GlobalEnv"</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib$objects.found</span></span>
<span><span class="co">## [1] "data"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="identifying-column-indices-using-dh-findvarsindex">Identifying column indices using dh.findVarsIndex<a class="anchor" aria-label="anchor" href="#identifying-column-indices-using-dh-findvarsindex"></a>
</h3>
<p>There are some occasions when we need to do know what column a set of
variables is. For example, the function ds.dataFrameSubset takes an
input for the argument <code>keep.cols</code> a vector column
positions.</p>
<p>Subsetting data frames by column number is highly susceptable to
breaking (e.g if you change the order of steps in a script). This
function allows you to identify the column numbers of a vector of column
names, like so:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indices</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dh.findVarsIndex.html">dh.findVarsIndex</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sex"</span>, <span class="st">"age"</span>, <span class="st">"weight"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">indices</span></span></code></pre></div>
<pre><code><span><span class="co">## $alspac</span></span>
<span><span class="co">## [1] 2 3 4</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bcg</span></span>
<span><span class="co">## [1] 2 3 4</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $bib</span></span>
<span><span class="co">## [1] 2 3 4</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="describing-data">Describing data<a class="anchor" aria-label="anchor" href="#describing-data"></a>
</h2>
<div class="section level3">
<h3 id="summarising-data-using-dh-getstats">Summarising data using dh.getStats()<a class="anchor" aria-label="anchor" href="#summarising-data-using-dh-getstats"></a>
</h3>
<p>The DataSHIELD functions <code>ds.summary</code> and
<code>ds.table</code> produce basic descriptive statistics. However,
they have a number of limitations: the output is not in a very useable
format, you can only specify one variable at a time, and they don’t
provide some information that we will likely need in manuscripts
(e.g. about missingness).</p>
<p>Here we describe multiple variables using dh.getStats():</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stats</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dh.getStats.html">dh.getStats</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span>, <span class="st">"weight"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stats</span></span></code></pre></div>
<pre><code><span><span class="co">## $categorical</span></span>
<span><span class="co">## # A tibble: 0 × 10</span></span>
<span><span class="co">## # ℹ 10 variables: variable &lt;chr&gt;, cohort &lt;chr&gt;, category &lt;chr&gt;, value &lt;dbl&gt;, cohort_n &lt;int&gt;, valid_n &lt;dbl&gt;,</span></span>
<span><span class="co">## #   missing_n &lt;dbl&gt;, perc_valid &lt;dbl&gt;, perc_missing &lt;dbl&gt;, perc_total &lt;dbl&gt;</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $continuous</span></span>
<span><span class="co">## # A tibble: 12 × 15</span></span>
<span><span class="co">##    variable cohort    mean std.dev perc_5 perc_10 perc_25 perc_50 perc_75 perc_90 perc_95 valid_n cohort_n missing_n</span></span>
<span><span class="co">##    &lt;chr&gt;    &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;</span></span>
<span><span class="co">##  1 age      alspac    6.2     5.53   0       0.1     0.83    4.52   10.8    13.9    15.7   129681   129681         0</span></span>
<span><span class="co">##  2 age      bcg       2.01    1.67   0       0.12    0.5     1.52    3.51    4.53    4.99   12724    12724         0</span></span>
<span><span class="co">##  3 age      bib       1.48    1.74   0       0       0.08    0.71    2.11    4.72    4.98   68864    68864         0</span></span>
<span><span class="co">##  4 sex      alspac    0.49    0.5    0       0       0       0       1       1       1     129681   129681         0</span></span>
<span><span class="co">##  5 sex      bcg       0.48    0.5    0       0       0       0       1       1       1      12724    12724         0</span></span>
<span><span class="co">##  6 sex      bib       0.49    0.5    0       0       0       0       1       1       1      68864    68864         0</span></span>
<span><span class="co">##  7 weight   alspac   25.3    20.2    3.93    4.56    8.4    18.5    38.5    56.2    65.3   129681   129681         0</span></span>
<span><span class="co">##  8 weight   bcg      11.6     5.29   4.12    4.69    6.55   11.7    15.8    18.5    20.0    12724    12724         0</span></span>
<span><span class="co">##  9 weight   bib       9.54    5.81   3.28    3.7     4.59    7.52   14.2    18.3    20.3    68864    68864         0</span></span>
<span><span class="co">## 10 age      combined  4.41    5.01   0       0.07    0.57    3.1     7.55   10.4    11.6   211269   211269         0</span></span>
<span><span class="co">## 11 sex      combined  0.49    0.5    0       0       0       0       1       1       1     211269   211269         0</span></span>
<span><span class="co">## 12 weight   combined 19.4    17.9    3.73    4.29    7.05   14.5    29.2    41.6    47.9   211269   211269         0</span></span>
<span><span class="co">## # ℹ 1 more variable: missing_perc &lt;dbl&gt;</span></span></code></pre>
<p>The output is a list of two tibbles, corresponding to categorical and
continuous variables. See the help file for a list of calculated figures
and stats.</p>
</div>
<div class="section level3">
<h3 id="extracting-model-coefficients-using-dh-lmtab">Extracting model coefficients using dh.lmTab<a class="anchor" aria-label="anchor" href="#extracting-model-coefficients-using-dh-lmtab"></a>
</h3>
<p>When we run simple linear regression models in DataSHIELD, the
coefficients are returned within a nested list. It can be a bit tricky
to manually extract these (e.g. to create a table or a plot). This
function extracts the coefficients from linear models and outputs them
in a tibble. It can also handle mixed-effect models and will also return
summaries of random effects.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.glm.html" class="external-link">ds.glm</a></span><span class="op">(</span>formula <span class="op">=</span> <span class="st">"weight~age"</span>, data <span class="op">=</span> <span class="st">"data"</span>, family <span class="op">=</span> <span class="st">"gaussian"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/dh.lmTab.html">dh.lmTab</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">output</span>, </span>
<span>  type <span class="op">=</span> <span class="st">"glm_ipd"</span>, </span>
<span>  direction <span class="op">=</span> <span class="st">"wide"</span>, </span>
<span>  ci_format  <span class="op">=</span> <span class="st">"separate"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error: Assertion on 'model' failed. function (msg) </span></span>
<span><span class="co">## msgs &lt;&lt;- c(msgs, msg).</span></span>
<span></span>
<span><span class="co">## Error: Assertion on 'model' failed. function () </span></span>
<span><span class="co">## msgs.</span></span>
<span></span>
<span><span class="co">## Error: Assertion on 'model' failed. function () </span></span>
<span><span class="co">## length(msgs) == 0.</span></span></code></pre>
<p>For manuscripts we may want to include confidence intervals in
brackets after the point estimate. We can specify this with the argument
“ci_format”:</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.lmTab.html">dh.lmTab</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">output</span>, </span>
<span>  type <span class="op">=</span> <span class="st">"glm_ipd"</span>, </span>
<span>  direction <span class="op">=</span> <span class="st">"wide"</span>, </span>
<span>  ci_format  <span class="op">=</span> <span class="st">"paste"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error: Assertion on 'model' failed. function (msg) </span></span>
<span><span class="co">## msgs &lt;&lt;- c(msgs, msg).</span></span>
<span></span>
<span><span class="co">## Error: Assertion on 'model' failed. function () </span></span>
<span><span class="co">## msgs.</span></span>
<span></span>
<span><span class="co">## Error: Assertion on 'model' failed. function () </span></span>
<span><span class="co">## length(msgs) == 0.</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="checking-class-of-data-using-dh-classdiscrepancy">Checking class of data using dh.classDiscrepancy()<a class="anchor" aria-label="anchor" href="#checking-class-of-data-using-dh-classdiscrepancy"></a>
</h3>
<p>In an ideal world all variables would have the same class in every
study. However due to mistakes in harmonisation (or your scripts!) this
may not be the case. The can cause problems because many DataSHIELD
functions require the input variable(s) to have the same class in all
studies.</p>
<p>Using dh.classDiscrepancy we can produce a tibble summarising the
class of variable(s) across multiple studies. If we leave the argument
<code>vars</code> empty we check the class of all variables. The column
“discrepancy” summarises whether there are differences across
studies.</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">disc</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dh.classDiscrepancy.html">dh.classDiscrepancy</a></span><span class="op">(</span>df <span class="op">=</span> <span class="st">"data"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">disc</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 6 × 5</span></span>
<span><span class="co">##   variable     discrepancy alspac  bcg     bib    </span></span>
<span><span class="co">##   &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  </span></span>
<span><span class="co">## 1 id           no          numeric numeric numeric</span></span>
<span><span class="co">## 2 age          no          numeric numeric numeric</span></span>
<span><span class="co">## 3 sex          no          numeric numeric numeric</span></span>
<span><span class="co">## 4 weight       no          numeric numeric numeric</span></span>
<span><span class="co">## 5 tmp_obj      no          numeric numeric numeric</span></span>
<span><span class="co">## 6 weight_iqr_s no          numeric numeric numeric</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="checking-non-missing-data-using-dh-anydata">Checking non-missing data using dh.anyData()<a class="anchor" aria-label="anchor" href="#checking-non-missing-data-using-dh-anydata"></a>
</h3>
<p>When we perform analyses with multiple cohorts, we may want to use
the same set of covariates in all analyses. We can use dh.anyData() to
check which cohortsh have at least some data on given variables.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">available</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dh.anyData.html">dh.anyData</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span>, <span class="st">"weight"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">available</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 3 × 4</span></span>
<span><span class="co">##   variable alspac bcg   bib  </span></span>
<span><span class="co">##   &lt;chr&gt;    &lt;lgl&gt;  &lt;lgl&gt; &lt;lgl&gt;</span></span>
<span><span class="co">## 1 age      TRUE   TRUE  TRUE </span></span>
<span><span class="co">## 2 sex      TRUE   TRUE  TRUE </span></span>
<span><span class="co">## 3 weight   TRUE   TRUE  TRUE</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="creating-a-dataset-for-analysis-using-dh-definecases">Creating a dataset for analysis using dh.defineCases()<a class="anchor" aria-label="anchor" href="#creating-a-dataset-for-analysis-using-dh-definecases"></a>
</h2>
<p>Before starting analysis we often want to restrict the dataset to
subjects meeting certain criteria. In the first example, we create a
vector indicating whether each subject has complete data on the set of
variables age, sex and weight:</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.defineCases.html">dh.defineCases</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>, </span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span>, <span class="st">"weight"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"all"</span>, </span>
<span>  new_obj <span class="op">=</span> <span class="st">"data_on_all_vars"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases_all</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.table.html" class="external-link">ds.table</a></span><span class="op">(</span><span class="st">"data_on_all_vars"</span><span class="op">)</span><span class="op">$</span><span class="va">output.list</span><span class="op">$</span><span class="va">TABLE_rvar.by.study_counts</span></span></code></pre></div>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases_all</span></span></code></pre></div>
<pre><code><span><span class="co">##                 study</span></span>
<span><span class="co">## data_on_all_vars alspac   bcg   bib</span></span>
<span><span class="co">##               1  129681 12724 68864</span></span>
<span><span class="co">##               NA      0     0     0</span></span></code></pre>
<p>The data we have here is not the best to illustrate this function, as
there is no missing data.</p>
<p>We can also check whether subjects have available data on
<em>any</em> of a set of variables:</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.defineCases.html">dh.defineCases</a></span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="st">"data"</span>, </span>
<span>  vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex"</span>, <span class="st">"weight"</span><span class="op">)</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"any"</span>, </span>
<span>  new_obj <span class="op">=</span> <span class="st">"data_on_any_vars"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases_any</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.table.html" class="external-link">ds.table</a></span><span class="op">(</span><span class="st">"data_on_any_vars"</span><span class="op">)</span><span class="op">$</span><span class="va">output.list</span><span class="op">$</span><span class="va">TABLE_rvar.by.study_counts</span></span></code></pre></div>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span> <span class="va">cases_any</span></span></code></pre></div>
<pre><code><span><span class="co">##                 study</span></span>
<span><span class="co">## data_on_any_vars alspac   bcg   bib</span></span>
<span><span class="co">##               1  129681 12724 68864</span></span>
<span><span class="co">##               NA      0     0     0</span></span></code></pre>
<p>Again, we can’t see the differences because all subjects have data on
all variables. However, lets assume that we want to create an subset of
our data restricted to participants with data on at least one of these
variables. We can then use ds.dataFrameSubset in conjuncture with the
vector we created:</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.dataFrameSubset.html" class="external-link">ds.dataFrameSubset</a></span><span class="op">(</span></span>
<span>  df.name <span class="op">=</span> <span class="st">"data"</span>, </span>
<span>  V1.name <span class="op">=</span> <span class="st">"data_on_all_vars"</span>, </span>
<span>  V2.name <span class="op">=</span> <span class="st">"1"</span>, </span>
<span>  Boolean.operator <span class="op">=</span> <span class="st">"=="</span>, </span>
<span>  newobj <span class="op">=</span> <span class="st">"complete_df"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.dim.html" class="external-link">ds.dim</a></span><span class="op">(</span><span class="st">"data"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.dim.html" class="external-link">ds.dim</a></span><span class="op">(</span><span class="st">"complete_df"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## $`dimensions of data in alspac`</span></span>
<span><span class="co">## [1] 129681      6</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`dimensions of data in bcg`</span></span>
<span><span class="co">## [1] 12724     6</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`dimensions of data in bib`</span></span>
<span><span class="co">## [1] 68864     6</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`dimensions of data in combined studies`</span></span>
<span><span class="co">## [1] 211269      6</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`dimensions of complete_df in alspac`</span></span>
<span><span class="co">## [1] 129681      6</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`dimensions of complete_df in bcg`</span></span>
<span><span class="co">## [1] 12724     6</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`dimensions of complete_df in bib`</span></span>
<span><span class="co">## [1] 68864     6</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## $`dimensions of complete_df in combined studies`</span></span>
<span><span class="co">## [1] 211269      6</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="miscellaneous-functions">Miscellaneous functions<a class="anchor" aria-label="anchor" href="#miscellaneous-functions"></a>
</h2>
<div class="section level3">
<h3 id="enabling-auto-complete-functionality-within-r-studio-">Enabling auto-complete functionality within R Studio.<a class="anchor" aria-label="anchor" href="#enabling-auto-complete-functionality-within-r-studio-"></a>
</h3>
<p>When using R studio with native R, auto-complete suggestions will
appear for variables within a data frame. However, by default these
won’t appear for variables within a serverside data frame.</p>
<p>We can get round this by creating a local object with the same
structure as the remote object. Once you have run this function,
autocomplete options for the data frame “data” should now be
available.</p>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dh.localProxy.html">dh.localProxy</a></span><span class="op">(</span>df <span class="op">=</span> <span class="st">"data"</span>, conns <span class="op">=</span> <span class="va">conns</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="manually-pooling-estimates-by-meta-analysis">Manually pooling estimates by meta-analysis<a class="anchor" aria-label="anchor" href="#manually-pooling-estimates-by-meta-analysis"></a>
</h3>
<p>Most of the time the meta-analysis functions in DataSHIELD
(e.g. ds.glmSLMA) will be sufficient. However, you may sometimes need
additional flexibility with meta-analysis. For example, currently
ds.glmSLMA doesn’t return heterogeneity statistics.</p>
<p>This functions takes vectors of coefficients and standard errors from
multiple cohorts and meta-analyses them.</p>
<p>First we fit a model in different cohorts and extract the
coefficients:</p>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">output</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/dsBaseClient/man/ds.glmSLMA.html" class="external-link">ds.glmSLMA</a></span><span class="op">(</span></span>
<span>  formula <span class="op">=</span> <span class="st">"weight~age"</span>, </span>
<span>  dataName <span class="op">=</span> <span class="st">"data"</span>, </span>
<span>  family <span class="op">=</span> <span class="st">"gaussian"</span><span class="op">)</span></span></code></pre></div>
<p>Now we can use this object and to the meta-analysis manually:</p>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_analysed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dh.metaManual.html">dh.metaManual</a></span><span class="op">(</span></span>
<span>  model <span class="op">=</span> <span class="va">output</span>,</span>
<span>  method <span class="op">=</span> <span class="st">"ML"</span><span class="op">)</span></span></code></pre></div>
<p>The output consists of a list with two elements. The first element
(“model”) is a list with the output from metafor. The length will be the
number of variables meta-analysed:</p>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">meta_analysed</span><span class="op">$</span><span class="va">model</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## List of 2</span></span>
<span><span class="co">##  $ (Intercept):List of 74</span></span>
<span><span class="co">##   ..$ b           : num [1, 1] 4.91</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   .. .. ..$ : NULL</span></span>
<span><span class="co">##   ..$ beta        : num [1, 1] 4.91</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   .. .. ..$ : NULL</span></span>
<span><span class="co">##   ..$ se          : num 0.415</span></span>
<span><span class="co">##   ..$ zval        : num 11.8</span></span>
<span><span class="co">##   ..$ pval        : num 3.03e-32</span></span>
<span><span class="co">##   ..$ ci.lb       : num 4.09</span></span>
<span><span class="co">##   ..$ ci.ub       : num 5.72</span></span>
<span><span class="co">##   ..$ vb          : num [1, 1] 0.172</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   ..$ tau2        : num 0.516</span></span>
<span><span class="co">##   ..$ se.tau2     : num 0.422</span></span>
<span><span class="co">##   ..$ tau2.fix    : logi FALSE</span></span>
<span><span class="co">##   ..$ tau2.f      : num 0.516</span></span>
<span><span class="co">##   ..$ I2          : num 99.9</span></span>
<span><span class="co">##   ..$ H2          : num 994</span></span>
<span><span class="co">##   ..$ R2          : NULL</span></span>
<span><span class="co">##   ..$ vt          : num 0.000519</span></span>
<span><span class="co">##   ..$ QE          : num 1753</span></span>
<span><span class="co">##   ..$ QEp         : num 0</span></span>
<span><span class="co">##   ..$ QM          : num 140</span></span>
<span><span class="co">##   ..$ QMdf        : int [1:2] 1 NA</span></span>
<span><span class="co">##   ..$ QMp         : num 3.03e-32</span></span>
<span><span class="co">##   ..$ k           : int 3</span></span>
<span><span class="co">##   ..$ k.f         : int 3</span></span>
<span><span class="co">##   ..$ k.eff       : int 3</span></span>
<span><span class="co">##   ..$ k.all       : int 3</span></span>
<span><span class="co">##   ..$ p           : int 1</span></span>
<span><span class="co">##   ..$ p.eff       : int 1</span></span>
<span><span class="co">##   ..$ parms       : num 2</span></span>
<span><span class="co">##   ..$ int.only    : logi TRUE</span></span>
<span><span class="co">##   ..$ int.incl    : logi TRUE</span></span>
<span><span class="co">##   ..$ intercept   : logi TRUE</span></span>
<span><span class="co">##   ..$ allvipos    : logi TRUE</span></span>
<span><span class="co">##   ..$ coef.na     : Named logi FALSE</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr "X"</span></span>
<span><span class="co">##   ..$ yi          : Named num [1:3] 4.02 5.78 4.92</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "betas study 1" "betas study 2" "betas study 3"</span></span>
<span><span class="co">##   .. ..- attr(*, "measure")= chr "GEN"</span></span>
<span><span class="co">##   .. ..- attr(*, "slab")= int [1:3] 1 2 3</span></span>
<span><span class="co">##   ..$ vi          : Named num [1:3] 0.000819 0.000964 0.000108</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "ses study 1" "ses study 2" "ses study 3"</span></span>
<span><span class="co">##   ..$ X           : num [1:3, 1] 1 1 1</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : NULL</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   ..$ weights     : NULL</span></span>
<span><span class="co">##   ..$ yi.f        : Named num [1:3] 4.02 5.78 4.92</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "betas study 1" "betas study 2" "betas study 3"</span></span>
<span><span class="co">##   .. ..- attr(*, "measure")= chr "GEN"</span></span>
<span><span class="co">##   .. ..- attr(*, "slab")= int [1:3] 1 2 3</span></span>
<span><span class="co">##   ..$ vi.f        : Named num [1:3] 0.000819 0.000964 0.000108</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "ses study 1" "ses study 2" "ses study 3"</span></span>
<span><span class="co">##   ..$ X.f         : num [1:3, 1] 1 1 1</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : NULL</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   ..$ weights.f   : NULL</span></span>
<span><span class="co">##   ..$ M           : num [1:3, 1:3] 0.517 0 0 0 0.517 ...</span></span>
<span><span class="co">##   ..$ outdat.f    :List of 8</span></span>
<span><span class="co">##   .. ..$ ai : num NA</span></span>
<span><span class="co">##   .. ..$ bi : num NA</span></span>
<span><span class="co">##   .. ..$ ci : num NA</span></span>
<span><span class="co">##   .. ..$ di : num NA</span></span>
<span><span class="co">##   .. ..$ x1i: num NA</span></span>
<span><span class="co">##   .. ..$ x2i: num NA</span></span>
<span><span class="co">##   .. ..$ t1i: num NA</span></span>
<span><span class="co">##   .. ..$ t2i: num NA</span></span>
<span><span class="co">##   ..$ ni          : NULL</span></span>
<span><span class="co">##   ..$ ni.f        : NULL</span></span>
<span><span class="co">##   ..$ ids         : int [1:3] 1 2 3</span></span>
<span><span class="co">##   ..$ not.na      : Named logi [1:3] TRUE TRUE TRUE</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "betas study 1" "betas study 2" "betas study 3"</span></span>
<span><span class="co">##   ..$ subset      : NULL</span></span>
<span><span class="co">##   ..$ slab        : int [1:3] 1 2 3</span></span>
<span><span class="co">##   ..$ slab.null   : logi TRUE</span></span>
<span><span class="co">##   ..$ measure     : chr "GEN"</span></span>
<span><span class="co">##   ..$ method      : chr "ML"</span></span>
<span><span class="co">##   ..$ model       : chr "rma.uni"</span></span>
<span><span class="co">##   ..$ weighted    : logi TRUE</span></span>
<span><span class="co">##   ..$ test        : chr "z"</span></span>
<span><span class="co">##   ..$ dfs         : int NA</span></span>
<span><span class="co">##   ..$ ddf         : int NA</span></span>
<span><span class="co">##   ..$ s2w         : num 1</span></span>
<span><span class="co">##   ..$ btt         : int 1</span></span>
<span><span class="co">##   ..$ m           : int 1</span></span>
<span><span class="co">##   ..$ digits      : Named num [1:9] 4 4 4 4 4 4 4 4 4</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:9] "est" "se" "test" "pval" ...</span></span>
<span><span class="co">##   ..$ level       : num 0.05</span></span>
<span><span class="co">##   ..$ control     : list()</span></span>
<span><span class="co">##   ..$ verbose     : logi FALSE</span></span>
<span><span class="co">##   ..$ add         : num 0.5</span></span>
<span><span class="co">##   ..$ to          : chr "only0"</span></span>
<span><span class="co">##   ..$ drop00      : logi FALSE</span></span>
<span><span class="co">##   ..$ fit.stats   :'data.frame': 5 obs. of  2 variables:</span></span>
<span><span class="co">##   .. ..$ ML  : num [1:5] -3.27 24.21 10.53 8.73 22.53</span></span>
<span><span class="co">##   .. ..$ REML: num [1:5] -2.68 5.36 9.36 6.74 21.36</span></span>
<span><span class="co">##   ..$ data        :&lt;environment: 0x139378300&gt; </span></span>
<span><span class="co">##   ..$ formula.yi  : NULL</span></span>
<span><span class="co">##   ..$ formula.mods: NULL</span></span>
<span><span class="co">##   ..$ version     :Classes 'package_version', 'numeric_version'  hidden list of 1</span></span>
<span><span class="co">##   .. ..$ : int [1:3] 4 2 0</span></span>
<span><span class="co">##   ..$ call        : language rma(yi = model$betamatrix.valid[x, ], sei = model$sematrix.valid[x, ], method = "ML")</span></span>
<span><span class="co">##   ..$ time        : num 0.003</span></span>
<span><span class="co">##   ..- attr(*, "class")= chr [1:2] "rma.uni" "rma"</span></span>
<span><span class="co">##  $ age        :List of 74</span></span>
<span><span class="co">##   ..$ b           : num [1, 1] 3.14</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   .. .. ..$ : NULL</span></span>
<span><span class="co">##   ..$ beta        : num [1, 1] 3.14</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   .. .. ..$ : NULL</span></span>
<span><span class="co">##   ..$ se          : num 0.133</span></span>
<span><span class="co">##   ..$ zval        : num 23.6</span></span>
<span><span class="co">##   ..$ pval        : num 6.46e-123</span></span>
<span><span class="co">##   ..$ ci.lb       : num 2.88</span></span>
<span><span class="co">##   ..$ ci.ub       : num 3.41</span></span>
<span><span class="co">##   ..$ vb          : num [1, 1] 0.0178</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   ..$ tau2        : num 0.0533</span></span>
<span><span class="co">##   ..$ se.tau2     : num 0.0435</span></span>
<span><span class="co">##   ..$ tau2.fix    : logi FALSE</span></span>
<span><span class="co">##   ..$ tau2.f      : num 0.0533</span></span>
<span><span class="co">##   ..$ I2          : num 99.9</span></span>
<span><span class="co">##   ..$ H2          : num 1915</span></span>
<span><span class="co">##   ..$ R2          : NULL</span></span>
<span><span class="co">##   ..$ vt          : num 2.78e-05</span></span>
<span><span class="co">##   ..$ QE          : num 4454</span></span>
<span><span class="co">##   ..$ QEp         : num 0</span></span>
<span><span class="co">##   ..$ QM          : num 556</span></span>
<span><span class="co">##   ..$ QMdf        : int [1:2] 1 NA</span></span>
<span><span class="co">##   ..$ QMp         : num 6.46e-123</span></span>
<span><span class="co">##   ..$ k           : int 3</span></span>
<span><span class="co">##   ..$ k.f         : int 3</span></span>
<span><span class="co">##   ..$ k.eff       : int 3</span></span>
<span><span class="co">##   ..$ k.all       : int 3</span></span>
<span><span class="co">##   ..$ p           : int 1</span></span>
<span><span class="co">##   ..$ p.eff       : int 1</span></span>
<span><span class="co">##   ..$ parms       : num 2</span></span>
<span><span class="co">##   ..$ int.only    : logi TRUE</span></span>
<span><span class="co">##   ..$ int.incl    : logi TRUE</span></span>
<span><span class="co">##   ..$ intercept   : logi TRUE</span></span>
<span><span class="co">##   ..$ allvipos    : logi TRUE</span></span>
<span><span class="co">##   ..$ coef.na     : Named logi FALSE</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr "X"</span></span>
<span><span class="co">##   ..$ yi          : Named num [1:3] 3.44 2.87 3.12</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "betas study 1" "betas study 2" "betas study 3"</span></span>
<span><span class="co">##   .. ..- attr(*, "measure")= chr "GEN"</span></span>
<span><span class="co">##   .. ..- attr(*, "slab")= int [1:3] 1 2 3</span></span>
<span><span class="co">##   ..$ vi          : Named num [1:3] 1.19e-05 1.41e-04 2.07e-05</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "ses study 1" "ses study 2" "ses study 3"</span></span>
<span><span class="co">##   ..$ X           : num [1:3, 1] 1 1 1</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : NULL</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   ..$ weights     : NULL</span></span>
<span><span class="co">##   ..$ yi.f        : Named num [1:3] 3.44 2.87 3.12</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "betas study 1" "betas study 2" "betas study 3"</span></span>
<span><span class="co">##   .. ..- attr(*, "measure")= chr "GEN"</span></span>
<span><span class="co">##   .. ..- attr(*, "slab")= int [1:3] 1 2 3</span></span>
<span><span class="co">##   ..$ vi.f        : Named num [1:3] 1.19e-05 1.41e-04 2.07e-05</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "ses study 1" "ses study 2" "ses study 3"</span></span>
<span><span class="co">##   ..$ X.f         : num [1:3, 1] 1 1 1</span></span>
<span><span class="co">##   .. ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">##   .. .. ..$ : NULL</span></span>
<span><span class="co">##   .. .. ..$ : chr "intrcpt"</span></span>
<span><span class="co">##   ..$ weights.f   : NULL</span></span>
<span><span class="co">##   ..$ M           : num [1:3, 1:3] 0.0533 0 0 0 0.0534 ...</span></span>
<span><span class="co">##   ..$ outdat.f    :List of 8</span></span>
<span><span class="co">##   .. ..$ ai : num NA</span></span>
<span><span class="co">##   .. ..$ bi : num NA</span></span>
<span><span class="co">##   .. ..$ ci : num NA</span></span>
<span><span class="co">##   .. ..$ di : num NA</span></span>
<span><span class="co">##   .. ..$ x1i: num NA</span></span>
<span><span class="co">##   .. ..$ x2i: num NA</span></span>
<span><span class="co">##   .. ..$ t1i: num NA</span></span>
<span><span class="co">##   .. ..$ t2i: num NA</span></span>
<span><span class="co">##   ..$ ni          : NULL</span></span>
<span><span class="co">##   ..$ ni.f        : NULL</span></span>
<span><span class="co">##   ..$ ids         : int [1:3] 1 2 3</span></span>
<span><span class="co">##   ..$ not.na      : Named logi [1:3] TRUE TRUE TRUE</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:3] "betas study 1" "betas study 2" "betas study 3"</span></span>
<span><span class="co">##   ..$ subset      : NULL</span></span>
<span><span class="co">##   ..$ slab        : int [1:3] 1 2 3</span></span>
<span><span class="co">##   ..$ slab.null   : logi TRUE</span></span>
<span><span class="co">##   ..$ measure     : chr "GEN"</span></span>
<span><span class="co">##   ..$ method      : chr "ML"</span></span>
<span><span class="co">##   ..$ model       : chr "rma.uni"</span></span>
<span><span class="co">##   ..$ weighted    : logi TRUE</span></span>
<span><span class="co">##   ..$ test        : chr "z"</span></span>
<span><span class="co">##   ..$ dfs         : int NA</span></span>
<span><span class="co">##   ..$ ddf         : int NA</span></span>
<span><span class="co">##   ..$ s2w         : num 1</span></span>
<span><span class="co">##   ..$ btt         : int 1</span></span>
<span><span class="co">##   ..$ m           : int 1</span></span>
<span><span class="co">##   ..$ digits      : Named num [1:9] 4 4 4 4 4 4 4 4 4</span></span>
<span><span class="co">##   .. ..- attr(*, "names")= chr [1:9] "est" "se" "test" "pval" ...</span></span>
<span><span class="co">##   ..$ level       : num 0.05</span></span>
<span><span class="co">##   ..$ control     : list()</span></span>
<span><span class="co">##   ..$ verbose     : logi FALSE</span></span>
<span><span class="co">##   ..$ add         : num 0.5</span></span>
<span><span class="co">##   ..$ to          : chr "only0"</span></span>
<span><span class="co">##   ..$ drop00      : logi FALSE</span></span>
<span><span class="co">##   ..$ fit.stats   :'data.frame': 5 obs. of  2 variables:</span></span>
<span><span class="co">##   .. ..$ ML  : num [1:5] 0.14 25.2 3.72 1.92 15.72</span></span>
<span><span class="co">##   .. ..$ REML: num [1:5] -0.407 0.814 4.814 2.201 16.814</span></span>
<span><span class="co">##   ..$ data        :&lt;environment: 0x12971ce00&gt; </span></span>
<span><span class="co">##   ..$ formula.yi  : NULL</span></span>
<span><span class="co">##   ..$ formula.mods: NULL</span></span>
<span><span class="co">##   ..$ version     :Classes 'package_version', 'numeric_version'  hidden list of 1</span></span>
<span><span class="co">##   .. ..$ : int [1:3] 4 2 0</span></span>
<span><span class="co">##   ..$ call        : language rma(yi = model$betamatrix.valid[x, ], sei = model$sematrix.valid[x, ], method = "ML")</span></span>
<span><span class="co">##   ..$ time        : num 0.003</span></span>
<span><span class="co">##   ..- attr(*, "class")= chr [1:2] "rma.uni" "rma"</span></span></code></pre>
<p>The second element (“coefficients”) is a summary table:</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">meta_analysed</span><span class="op">$</span><span class="va">coefs</span></span></code></pre></div>
<pre><code><span><span class="co">## # A tibble: 2 × 3</span></span>
<span><span class="co">##   term         coef    se</span></span>
<span><span class="co">##   &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span><span class="co">## 1 (Intercept)  4.91 0.415</span></span>
<span><span class="co">## 2 age          3.14 0.133</span></span></code></pre>
<p>Finish by logging out of the demo server</p>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://datashield.github.io/DSI/reference/datashield.logout.html" class="external-link">datashield.logout</a></span><span class="op">(</span><span class="va">conns</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Tim Cadman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
